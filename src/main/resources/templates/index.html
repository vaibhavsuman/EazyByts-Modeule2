<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Trading Simulation System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-chart-line"></i>
                <span>StockSim</span>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="#dashboard" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                <a href="#trading" class="nav-link" data-section="trading">
                    <i class="fas fa-exchange-alt"></i> Trading
                </a>
                <a href="#portfolio" class="nav-link" data-section="portfolio">
                    <i class="fas fa-briefcase"></i> Portfolio
                </a>
                <a href="#stocks" class="nav-link" data-section="stocks">
                    <i class="fas fa-chart-bar"></i> Stocks
                </a>
            </div>
            <div class="nav-auth">
                <div id="authButtons">
                    <button class="btn btn-outline" onclick="showAuthModal('login')">Login</button>
                    <button class="btn btn-primary" onclick="showAuthModal('register')">Register</button>
                </div>
                <div id="userInfo" style="display: none;">
                    <span id="userWelcome"></span>
                    <button class="btn btn-outline" onclick="logout()">Logout</button>
                </div>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <div class="container">
                <h1 class="section-title">Trading Dashboard</h1>
                
                <!-- Portfolio Summary Cards -->
                <div class="portfolio-summary">
                    <div class="card">
                        <div class="card-header">
                            <h3>Total Portfolio Value</h3>
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="card-body">
                            <div class="metric-value" id="totalValue">$0.00</div>
                            <div class="metric-change positive" id="totalChange">+$0.00 (+0.00%)</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Cash Balance</h3>
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="card-body">
                            <div class="metric-value" id="cashBalance">$0.00</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Invested Value</h3>
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="card-body">
                            <div class="metric-value" id="investedValue">$0.00</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Total Return</h3>
                            <i class="fas fa-trending-up"></i>
                        </div>
                        <div class="card-body">
                            <div class="metric-value" id="totalReturn">$0.00</div>
                            <div class="metric-change" id="totalReturnPercent">+0.00%</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h2>Quick Actions</h2>
                    <div class="action-grid">
                        <button class="action-btn" onclick="showSection('trading')">
                            <i class="fas fa-exchange-alt"></i>
                            <span>Trade Stocks</span>
                        </button>
                        <button class="action-btn" onclick="showSection('portfolio')">
                            <i class="fas fa-briefcase"></i>
                            <span>View Portfolio</span>
                        </button>
                        <button class="action-btn" onclick="showSection('stocks')">
                            <i class="fas fa-chart-bar"></i>
                            <span>Browse Stocks</span>
                        </button>
                        <button class="action-btn" onclick="refreshData()">
                            <i class="fas fa-sync-alt"></i>
                            <span>Refresh Data</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trading Section -->
        <section id="trading" class="section">
            <div class="container">
                <h1 class="section-title">Stock Trading</h1>
                
                <div class="trading-grid">
                    <!-- Trading Form -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Place Order</h3>
                        </div>
                        <div class="card-body">
                            <form id="tradingForm">
                                <div class="form-group">
                                    <label for="stockSymbol">Stock Symbol</label>
                                    <input type="text" id="stockSymbol" placeholder="e.g., AAPL" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="orderType">Order Type</label>
                                    <select id="orderType">
                                        <option value="BUY">Buy</option>
                                        <option value="SELL">Sell</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="quantity">Quantity</label>
                                    <input type="number" id="quantity" min="1" value="1" required>
                                </div>
                                
                                <div class="form-group">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-paper-plane"></i> Place Order
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Stock Info -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Stock Information</h3>
                        </div>
                        <div class="card-body">
                            <div id="stockInfo">
                                <p>Enter a stock symbol to see current information</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Section -->
        <section id="portfolio" class="section">
            <div class="container">
                <h1 class="section-title">Portfolio</h1>
                
                <!-- Holdings -->
                <div class="card">
                    <div class="card-header">
                        <h3>Current Holdings</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table id="holdingsTable">
                                <thead>
                                    <tr>
                                        <th>Symbol</th>
                                        <th>Company</th>
                                        <th>Quantity</th>
                                        <th>Avg Price</th>
                                        <th>Current Price</th>
                                        <th>Market Value</th>
                                        <th>Gain/Loss</th>
                                        <th>% Change</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="8" class="text-center">No holdings found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Transactions -->
                <div class="card">
                    <div class="card-header">
                        <h3>Recent Transactions</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table id="transactionsTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Type</th>
                                        <th>Symbol</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Total</th>
                                        <th>Commission</th>
                                        <th>Net Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="8" class="text-center">No transactions found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stocks Section -->
        <section id="stocks" class="section">
            <div class="container">
                <h1 class="section-title">Stock Market</h1>
                
                <!-- Search -->
                <div class="search-bar">
                    <input type="text" id="stockSearch" placeholder="Search stocks by symbol or name...">
                    <button onclick="searchStocks()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <!-- Stock List -->
                <div class="card">
                    <div class="card-header">
                        <h3>Available Stocks</h3>
                        <button class="btn btn-outline" onclick="loadStocks()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table id="stocksTable">
                                <thead>
                                    <tr>
                                        <th>Symbol</th>
                                        <th>Company Name</th>
                                        <th>Price</th>
                                        <th>Change</th>
                                        <th>% Change</th>
                                        <th>Volume</th>
                                        <th>Market Cap</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="8" class="text-center">Loading stocks...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Login</h2>
                <span class="close" onclick="closeAuthModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="authForm">
                    <div id="registerFields" style="display: none;">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" placeholder="Enter first name">
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" placeholder="Enter last name">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Enter email" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" placeholder="Enter username" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" placeholder="Enter password" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-full">
                        <i class="fas fa-sign-in-alt"></i> <span id="submitText">Login</span>
                    </button>
                </form>
                
                <div class="auth-switch">
                    <span id="switchText">Don't have an account?</span>
                    <a href="#" id="switchLink" onclick="toggleAuthMode()">Register</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="/js/app.js"></script>
</body>
</html>